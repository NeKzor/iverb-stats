(this["webpackJsonpiverb-stats"]=this["webpackJsonpiverb-stats"]||[]).push([[0],{161:function(e,t,a){e.exports=a(183)},183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),i=a(143),c=a(13),u=a(54),m=a(21),s=a(265),d=a(235),f=a(264),p=a(106),b=a(105),E=a(104),g=a(141),y=a(241),h=a(240),v=a(32),w=a(271),j=a(243),x=a(244),O=a(237),k=a(185),D=a(239),S=a(273),B=a(242),T=a(74),C=a(130),M=a.n(C),Y=function(){var e=r.a.useRef(!1);return r.a.useEffect((function(){return e.current=!0,function(){return e.current=!1}}),[]),e},L=Object(d.a)((function(e){return{root:{paddingBottom:e.spacing(8)},list:{width:e.spacing(25)},menuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},appBar:{zIndex:e.zIndex.drawer+1},flex:{flex:1},active:{color:e.palette.primary.main}}})),N=[{title:"404 - Page Not Found",link:null,inDrawer:!1},{title:"iverb-stats",link:"/",inDrawer:!1},{title:"Records",link:"/records",inDrawer:!0,default:!0},{title:"Rankings",link:"/ranks",inDrawer:!0,default:!0},{title:"Statistics",link:"/stats",inDrawer:!0,default:!0},{title:"Race",link:"/race",inDrawer:!0,default:!0},{title:"Demo Inspection",link:"/demo",inDrawer:!1},{title:"About",link:"/about",inDrawer:!1}],R=Object(m.g)((function(e){var t,a=e.location,n=r.a.useState(!1),l=Object(c.a)(n,2),o=l[0],i=l[1],m=r.a.useMemo((function(){return N.find((function(e){return e.link===a.pathname||null!==e.link&&a.pathname.startsWith(e.link+"/")}))||N[0]}),[a]);t=m.title,r.a.useEffect((function(){document.title=t+" - "+document.location.host}),[t]);var s=function(e){return function(){i(e)}},d=L(),f=r.a.createElement("div",{className:d.list},r.a.createElement(O.a,null,r.a.createElement(k.a,{button:!0,key:0,component:u.b,to:"/"},r.a.createElement(D.a,{primary:"iverb-stats"}))),r.a.createElement(h.a,null),r.a.createElement(O.a,null,N.filter((function(e){return e.inDrawer})).map((function(e,t){return r.a.createElement(k.a,{button:!0,key:t,component:u.b,to:e.link,className:e.title===m.title?d.active:void 0},r.a.createElement(D.a,{primary:e.title}))})),r.a.createElement(h.a,null),r.a.createElement(O.a,null,r.a.createElement(k.a,{button:!0,key:0,component:u.b,to:"/demo"},r.a.createElement(D.a,{primary:"Demo Inspection"})),r.a.createElement(k.a,{button:!0,key:1,component:u.b,to:"/about"},r.a.createElement(D.a,{primary:"About"})))));return r.a.createElement("div",{className:d.root},r.a.createElement(y.a,{className:d.appBar,position:"fixed"},r.a.createElement(B.a,null,r.a.createElement(w.a,{lgUp:!0},r.a.createElement(j.a,{className:d.menuButton,onClick:s(!0),color:"inherit"},r.a.createElement(M.a,null))),r.a.createElement(T.a,{variant:"h6",color:"inherit"},r.a.createElement(x.a,{component:u.b,to:"/",color:"inherit",underline:"none"},"iverb-stats")))),r.a.createElement(w.a,{lgUp:!0,implementation:"css"},r.a.createElement(S.a,{open:o,onClose:s(!1),onOpen:s(!0),variant:"temporary"},r.a.createElement("div",{tabIndex:0,role:"button",onClick:s(!1),onKeyDown:s(!1)},f))),r.a.createElement(w.a,{mdDown:!0,implementation:"css"},r.a.createElement(v.a,{variant:"permanent"},r.a.createElement("div",{tabIndex:0,role:"button"},f))))})),P=a(248),z=a(247),I=a(186),q=a(276),A=a(246),W=function(e){var t=e.children;return r.a.createElement(A.a,{container:!0},r.a.createElement(A.a,{item:!0,xs:!1,md:1,lg:2}),r.a.createElement(A.a,{item:!0,xs:12,md:10,lg:9},t))},_=a(8),F=a(69),X=a(99),U={darkMode:new(function(){function e(){Object(F.a)(this,e),this.enabled="true"===localStorage.getItem("dark_mode")}return Object(X.a)(e,[{key:"toggle",value:function(){return this.enabled=!this.enabled,localStorage.setItem("dark_mode",this.enabled.toString()),this}}]),e}())},H=[function(e,t){switch(t.action){case"toggleDarkMode":return Object(_.a)(Object(_.a)({},e),{},{darkMode:e.darkMode.toggle()});default:throw new Error("Unknown action type.")}},U],J=r.a.createContext(U),K=Object(d.a)((function(e){return{aboutBox:{padding:e.spacing(3)}}})),G=function(){return r.a.createElement("div",{style:{paddingTop:"50px"}})},V=function(){var e=r.a.useContext(J),t=e.state.darkMode,a=e.dispatch,n=K();return r.a.createElement(W,null,r.a.createElement(I.a,{className:n.aboutBox},r.a.createElement(T.a,{component:"h2",variant:"h5"},"Portal 2 World Records & Statistics"),r.a.createElement("br",null),r.a.createElement(T.a,{variant:"body1"},"aka iverb 1\xbd"),r.a.createElement(G,null),r.a.createElement(T.a,{variant:"h5"},"Theme Settings"),r.a.createElement("br",null),r.a.createElement(z.a,{row:!0},r.a.createElement(P.a,{control:r.a.createElement(q.a,{checked:t.enabled,onChange:function(){a({action:"toggleDarkMode"})},color:"primary"}),label:"Dark Mode"})),r.a.createElement(G,null),r.a.createElement(T.a,{variant:"h5"},"Credits"),r.a.createElement("br",null),r.a.createElement(x.a,{rel:"noopener",href:"https://board.iverb.me"},"board.iverb.me"),r.a.createElement("br",null),r.a.createElement(x.a,{rel:"noopener",href:"https://github.com/NeKzor/sdp.js"},"sdp.js")))},$=a(131),Q=a.n($),Z=a(249),ee=a(274),te=a(270),ae=a(14),ne=function(e){return r.a.createElement(te.a,Object.assign({elevation:6,variant:"filled"},e))},re={info:"drag & drop demo here :)"},le=function(){var e=Y(),t=Object(ae.a)(),a=r.a.useState(re),n=Object(c.a)(a,2),l=n[0],o=n[1],i=r.a.useState(!1),u=Object(c.a)(i,2),m=u[0],s=u[1],d=function(e,t){"clickaway"!==t&&s(!1)},f=r.a.useCallback((function(t){if(t){var a=new FileReader;a.onload=function(t){var a=t.target.result;try{if(!e.current)return;o(re),s(!1);var n=window,r=n.Buffer,l=n.SourceDemoParser,i=n.Speedrun,c=l.default(),u=i.SourceTimer.default(),m=i.SarTimer.default(),d=window.demo=c.parse(r.from(a));if(d.detectGame().adjustTicks(),d.adjustRange(),0===d.playbackTicks){var f=d.getIntervalPerTick();d.playbackTicks=1,d.playbackTime=f}else d.speedrun=u.time(d),d.sar=m.time(d);if(!e.current)return;!function e(t){Object.keys(t).forEach((function(a){"_view"===a?delete t._view:"object"===typeof t[a]&&e(t[a])}))}(d),o(d)}catch(p){e.current&&s(p.message)}},a.readAsArrayBuffer(t)}}),[e,o,s]),p=r.a.useCallback((function(e){return f(e.target.files[0])}),[f]),b=function(e){e.dataTransfer.items?e.dataTransfer.items.clear():e.dataTransfer.clearData()};r.a.useEffect((function(){return document.querySelector("#file").addEventListener("change",p),function(){return document.querySelector("#file").removeEventListener("change",p)}}),[p]);return r.a.createElement(W,null,r.a.createElement(I.a,{style:{padding:"20px 20px 20px 20px"}},r.a.createElement(Z.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){document.querySelector("#file").click()}},"Open file"),r.a.createElement("input",{type:"file",id:"file",style:{display:"none"}}),r.a.createElement("div",{style:{paddingBottom:"20px"}}),r.a.createElement("div",{onDrop:function(e){e.preventDefault();var t=[];if(e.dataTransfer.items)for(var a=0;a<e.dataTransfer.items.length;++a)"file"===e.dataTransfer.items[a].kind&&t.push(e.dataTransfer.items[a].getAsFile());f(t[0]),b(e)},onDragOver:function(e){e.preventDefault()}},r.a.createElement(Q.a,{name:"demo",style:{fontSize:"14px"},src:l,theme:"light"===t.palette.type?"bright:inverted":"solarized",displayDataTypes:!1,displayObjectSize:!1,enableClipboard:!1})),r.a.createElement(ee.a,{open:!1!==m,autoHideDuration:6e3,onClose:d},r.a.createElement(ne,{onClose:d,severity:"error"},m))))},oe=function(e){var t=e.data,a=e.props;return r.a.createElement(T.a,Object.assign({variant:"h5",gutterBottom:!0,style:{padding:"50px 0px 50px 50px"}},a),t)},ie=function(){return r.a.createElement(W,null,r.a.createElement(I.a,null,r.a.createElement(oe,{data:"Page not found :("})))},ce=a(46),ue=a(51),me=a(27),se=a.n(me),de=a(267),fe=a(260),pe=a(261),be=a(269),Ee=a(254),ge=a(255),ye=a(253),he=a(251),ve=a(252),we=a(279),je=a(275),xe={numeric:!0},Oe=function(e,t,a){var n=function(e,t){var n=De(e,a).toString();return De(t,a).toString().localeCompare(n,void 0,xe)},r="desc"===t?function(e,t){return n(e,t)}:function(e,t){return-n(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=r(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},ke=function(e,t,a,n){if(a===n)return Oe(e,t,a);var r=function(e,t){var r=De(e,a).toString(),l=De(t,a).toString(),o=l.localeCompare(r,void 0,xe);return 0!==o?o:(r=De(e,n).toString(),(l=De(t,n).toString()).localeCompare(r,void 0,xe))},l="desc"===t?function(e,t){return r(e,t)}:function(e,t){return-r(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=l(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},De=function(e,t){return-1!==t.indexOf(".")?t.split(".").filter((function(e){return e})).reduce((function(e,t){return e&&e[t]}),e):e[t]},Se=a(278),Be=Object(d.a)((function(e){return{avatar:{width:e.spacing(3),height:e.spacing(3),marginRight:10}}})),Te=function(e){var t=e.user,a=Be();return r.a.createElement(A.a,{container:!0,direction:"row",wrap:"nowrap"},r.a.createElement(A.a,{item:!0},r.a.createElement(Se.a,{className:a.avatar,src:t.avatar})),r.a.createElement(A.a,{item:!0},r.a.createElement(x.a,{color:"inherit",href:"https://board.iverb.me/profile/"+t.id,rel:"noreferrer",target:"_blank",noWrap:!0},t.name)))},Ce=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],Me=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort,l=e.showDuration;return r.a.createElement(he.a,null,r.a.createElement(ve.a,null,Ce.filter((function(e){return"duration"!==e.id||l})).map((function(e){return r.a.createElement(ye.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&r.a.createElement(je.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(we.a,{active:a===e.id,direction:t,onClick:(l=e.id,o=e.id2,function(e){n(e,l,o)})},e.label)),!1===e.sortable&&e.label);var l,o}))))},Ye=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Le={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Ne={padding:"7px 0px 7px 16px"},Re=function(e){return r.a.createElement(ye.a,Object.assign({style:Ne},e))},Pe=function(e){var t=e.data,a=e.showDuration,n=r.a.useState(Object(_.a)({},Le)),l=Object(c.a)(n,2),o=l[0],i=o.order,u=o.orderBy,m=o.thenBy,s=l[1],d=Ye();return r.a.createElement("div",{className:d.root},r.a.createElement(Ee.a,{size:"small"},r.a.createElement(Me,{order:i,orderBy:u,onRequestSort:function(e,t,a){var n=t,r=a;s((function(e){return Object(_.a)(Object(_.a)({},e),{},{order:e.orderBy===n&&"desc"===e.order?"asc":"desc",orderBy:n,thenBy:r})}))},showDuration:a}),r.a.createElement(ge.a,null,(a?ke:Oe)(t,i,u,m).map((function(e){return r.a.createElement(ve.a,{tabIndex:-1,key:e.user.id},r.a.createElement(Re,{align:"left"},r.a.createElement(Te,{user:e.user})),r.a.createElement(Re,{align:"left"},e.wrs),a&&r.a.createElement(Re,{align:"left"},e.duration," day",1===e.duration?"":"s"))})))))},ze=a(20),Ie=a.n(ze),qe=a(256),Ae=a(117),We=a.n(Ae),_e=a(137),Fe=a.n(_e),Xe=a(118),Ue=a.n(Xe),He=a(266);function Je(e){if(void 0===e||null===e)return e;var t=e%100,a=Math.floor(e/100),n=a%60,r=Math.floor(a/60);return(r>0?r+":":"")+(n<10&&r>0?"0"+n:n)+"."+(t<10?"0"+t:t)}var Ke=Object(He.a)().domain([0,24,336,1440]).range(["#2eb82e","#258e25","#cca300","#e67300"]);function Ge(e){var t=se()().diff(se()(e),"hours");return t<=1440?Ke(t):void 0}Object(He.a)().domain([0,480,960,1440]).range(["#2eb82e","#cca300","#e67300","#e63200"]);var Ve=[{id:"map.name",sortable:!0,label:"Chamber",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"},{id:"id",sortable:!1,label:"",align:"left"}],$e=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return r.a.createElement(he.a,null,r.a.createElement(ve.a,null,Ve.map((function(e,l){return r.a.createElement(ye.a,{key:l,align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:l===Ve.length-1?2:1},!0===e.sortable&&r.a.createElement(je.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(we.a,{active:a===e.id,direction:t,onClick:(o=e.id,function(e){n(e,o)})},e.label)),!1===e.sortable&&e.label);var o}))))},Qe=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Ze={order:"asc",orderBy:"map.index",page:0,rowsPerPage:250},et={whiteSpace:"nowrap"},tt={padding:"7px 0px 7px 16px"},at=function(e){return r.a.createElement(ye.a,Object.assign({style:tt},e))},nt=Object(d.a)((function(e){return{root:{"& > *":{borderBottom:"unset"}},avatar:{width:e.spacing(3),height:e.spacing(3),marginRight:10}}})),rt=function(e){var t=e.wr,a=e.useLiveDuration,n=Je(t.score),l=null!==t.delta?Je(t.delta):null,o=!1!==t.isPartner||!t.partnerId,i=null===t.beatenBy.id;return r.a.createElement(ve.a,{tabIndex:-1},o&&r.a.createElement(at,{align:"left",rowSpan:!0===t.isPartner?2:1},r.a.createElement(je.a,{title:r.a.createElement(Ie.a,{fromNow:!0},t.date),placement:"bottom-end",enterDelay:300},r.a.createElement(Ie.a,{style:Object(_.a)({color:Ge(t.date)},et),format:"YYYY-MM-DD"},t.date))),o&&r.a.createElement(at,{align:"left",rowSpan:!0===t.isPartner?2:1},n),r.a.createElement(at,{align:"left"},r.a.createElement(x.a,{color:"inherit",href:"https://board.iverb.me/profile/".concat(t.user.id),rel:"noreferrer",target:"_blank"},t.user.name)),o&&r.a.createElement(at,{align:"left",rowSpan:!0===t.isPartner?2:1},l?"-"+l:""),o&&r.a.createElement(at,{align:"left",rowSpan:!0===t.isPartner?2:1},r.a.createElement(je.a,{title:"in days",placement:"bottom-end",enterDelay:300},a&&i?r.a.createElement(Ie.a,{style:et,diff:t.date,unit:"days"}):r.a.createElement("span",null,t.duration))),r.a.createElement(at,{align:"left",style:et},t.demo&&r.a.createElement(je.a,{title:"Download Demo",placement:"bottom",enterDelay:300},r.a.createElement(j.a,{size:"small",style:et,color:"inherit",href:"https://board.iverb.me/getDemo?id="+t.id,rel:"noreferrer",target:"_blank"},r.a.createElement(We.a,{fontSize:"inherit"}))),t.media&&r.a.createElement(je.a,{title:"Watch on YouTube",placement:"bottom",enterDelay:300},r.a.createElement(j.a,{size:"small",style:Object(_.a)(Object(_.a)({},et),{},{marginLeft:t.demo?void 0:24}),color:"inherit",href:"https://youtu.be/"+t.media,rel:"noreferrer",target:"_blank"},r.a.createElement(Ue.a,{fontSize:"inherit"})))))},lt=function(e){var t=e.wr,a=e.orderBy,n=e.useLiveDuration,l=e.history,o=e.onClickHistory,i=Je(t.score),c=null!==t.delta?Je(t.delta):null,u=nt(),m=l===t.map.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{tabIndex:-1},(t.map.isFirst||"map.name"!==a&&"map.index"!==a)&&r.a.createElement(at,{style:et,rowSpan:"map.name"===a||"map.index"===a?t.map.records:1,align:"left"},r.a.createElement(x.a,{color:"inherit",href:"https://board.iverb.me/chamber/".concat(t.map.id),rel:"noreferrer",target:"_blank"},t.map.name)),(t.map.isFirst||"map.name"!==a&&"map.index"!==a)&&r.a.createElement(at,{rowSpan:"map.name"===a||"map.index"===a?t.map.records:1,align:"left"},c&&r.a.createElement(je.a,{title:r.a.createElement("span",null,"-",c," to former record"),placement:"bottom",enterDelay:300},r.a.createElement("span",null,i)),!c&&r.a.createElement("span",null,i)),r.a.createElement(at,{align:"left"},r.a.createElement(Te,{user:t.user})),r.a.createElement(at,{align:"left"},r.a.createElement(je.a,{title:r.a.createElement(Ie.a,{fromNow:!0},t.date),placement:"bottom-end",enterDelay:300},r.a.createElement(Ie.a,{style:Object(_.a)({color:Ge(t.date)},et),format:"YYYY-MM-DD"},t.date))),r.a.createElement(at,{align:"left"},r.a.createElement(je.a,{title:"in days",placement:"bottom-end",enterDelay:300},n?r.a.createElement(Ie.a,{style:et,diff:t.date,unit:"days"}):r.a.createElement("span",null,t.duration))),r.a.createElement(at,{align:"left",style:et},t.demo&&r.a.createElement(je.a,{title:"Download Demo",placement:"bottom",enterDelay:300},r.a.createElement(j.a,{size:"small",style:et,color:"inherit",href:"https://board.iverb.me/getDemo?id="+t.id,rel:"noreferrer",target:"_blank"},r.a.createElement(We.a,{fontSize:"inherit"}))),t.media&&r.a.createElement(je.a,{title:"Watch on YouTube",placement:"bottom",enterDelay:300},r.a.createElement(j.a,{size:"small",style:Object(_.a)(Object(_.a)({},et),{},{marginLeft:t.demo?void 0:24}),color:"inherit",href:"https://youtu.be/"+t.media,rel:"noreferrer",target:"_blank"},r.a.createElement(Ue.a,{fontSize:"inherit"}))),t.map.isLast&&t.map.history&&r.a.createElement(j.a,{color:"inherit",size:"small",style:Object(_.a)(Object(_.a)({},et),{},{marginLeft:t.demo||t.media?t.media?void 0:24:48}),onClick:function(){return o(t.map.id)}},r.a.createElement(Fe.a,{fontSize:"inherit"})))),t.map.isLast&&t.map.history&&r.a.createElement(ve.a,{className:u.root},r.a.createElement(at,{style:{paddingBottom:0,paddingTop:0},colSpan:7},r.a.createElement(qe.a,{in:m,timeout:"auto",unmountOnExit:!0},r.a.createElement(de.a,{margin:1},r.a.createElement(T.a,{variant:"h6",gutterBottom:!0,component:"div"},"History"),r.a.createElement(Ee.a,{size:"small","aria-label":"purchases"},r.a.createElement(he.a,null,r.a.createElement(ve.a,null,r.a.createElement(at,null,"Date"),r.a.createElement(at,null,"Record"),r.a.createElement(at,null,"Player"),r.a.createElement(at,null,"Timesave"),r.a.createElement(at,{colSpan:2},"Duration"))),r.a.createElement(ge.a,null,t.map.history.map((function(e,t){return r.a.createElement(rt,{wr:e,key:t,useLiveDuration:n})})))))))))},ot=function(e){var t=e.data,a=e.stats,n=e.useLiveDuration,l=r.a.useState(Ze),o=Object(c.a)(l,2),i=o[0],u=i.order,m=i.rowsPerPage,s=i.orderBy,d=i.page,f=o[1],p=r.a.useState(null),b=Object(c.a)(p,2),E=b[0],g=b[1],y=r.a.useCallback((function(e){g(E!==e?e:null)}),[E,g]),h=Qe();return r.a.createElement("div",{className:h.root},r.a.createElement(Ee.a,{size:"small"},r.a.createElement($e,{order:u,orderBy:s,onRequestSort:function(e,t){var a=t;f((function(e){return Object(_.a)(Object(_.a)({},e),{},{order:e.orderBy===a||"desc"===e.order?"asc":"desc",orderBy:e.orderBy===a&&"asc"===e.order?"map.index":a})}))}}),r.a.createElement(ge.a,null,Oe(t,u,s).slice(d*m,d*m+m).map((function(e,t){return r.a.createElement(lt,{wr:e,orderBy:s,useLiveDuration:n,history:E,onClickHistory:y,key:t})}))),r.a.createElement(ge.a,null,a.totalTime>0&&r.a.createElement(ve.a,null,r.a.createElement(at,{align:"right"},"Total Time"),r.a.createElement(at,null,r.a.createElement(je.a,{title:se.a.duration(a.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300},r.a.createElement("span",null,Je(a.totalTime)))),r.a.createElement(at,{colSpan:5})))))},it=a(103),ct=a.n(it),ut=a(257),mt=Object(ut.a)((function(e){var t=e.labels,a=e.series,n=e.title,l=e.theme,o=e.rest,i="dark"===l.palette.type;if(o){var c=a.slice(11).reduce((function(e,t){return e+t}),0);a=a.slice(0,11),t=t.slice(0,11),a.push(c),t.push("Rest")}return r.a.createElement(ct.a,{options:{labels:t,legend:{show:!1},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0,color:i?"white":"black"},total:{show:!0,label:n,color:i?"white":"black"}}}}}},series:a,type:"donut",height:"400"})})),st=a(259),dt=a(258),ft=a(138),pt=a.n(ft),bt=Object(d.a)((function(e){return{fab:{margin:0,top:"auto",right:30,bottom:30,left:"auto",position:"fixed"}}})),Et=function(){!function e(){var t=document.documentElement.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/5))}()},gt=function(){var e=function(){var e=r.a.useRef(void 0),t=r.a.useState({x:0,y:0}),a=Object(c.a)(t,2),n=a[0],l=a[1],o=r.a.useCallback((function(){clearTimeout(e.current),e.current=setTimeout((function(){l({x:window.scrollX,y:window.scrollY})}),100)}),[l]);return r.a.useEffect((function(){return window.addEventListener("scroll",o),function(){clearTimeout(e.current),window.removeEventListener("scroll",o)}}),[o]),n}().y,t=bt();return r.a.createElement(dt.a,{in:0!==e,timeout:1e3},r.a.createElement(st.a,{title:"Jump to top",color:"secondary",className:t.fab,onClick:Et},r.a.createElement(pt.a,null)))},yt=a(73),ht=a.n(yt),vt=a(139),wt=new(function(){function e(){Object(F.a)(this,e),this.baseApi="https://raw.githubusercontent.com/NeKzBot/iverb-stats/api"}return Object(X.a)(e,[{key:"request",value:function(){var e=Object(vt.a)(ht.a.mark((function e(t,a){var n;return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/").concat(t,"/").concat(a||"latest",".json"));case 2:if(n=e.sent,console.log("GET ".concat(n.url," (").concat(n.status,")")),n.ok){e.next=6;break}throw new Error(n.statusText);case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),jt=Object(d.a)((function(e){return{padTop:{paddingTop:"70px"}}})),xt=Object(ue.a)((function(e){var t=e.match,a=Y(),n=r.a.useState(void 0),l=Object(c.a)(n,2),o=l[0],i=l[1],u=r.a.useState(0),m=Object(c.a)(u,2),s=m[0],d=m[1],f=t.params[0],p=t.params.date,b=void 0===p||"latest"===p;r.a.useEffect((function(){d(0),i(void 0)}),[f]),r.a.useEffect((function(){wt.request("records").then((function(e){var t=e.campaigns,n=se()(p,["YYYY-MM-DD"]),r=!b&&n.isValid();if(r){var l,o=Object(ce.a)(t);try{var c=function(){var e,t=l.value,a=Object(ce.a)(t.maps);try{var o=function(){var t=e.value;t.history=t.history.filter((function(e){var t=e.date;return se()(t).diff(n,"d")<=0}));var a=t.history[t.history.length-1];t.wrs=t.history.filter((function(e){return e.score===a.score})),t.wrs.forEach((function(e){e.beatenBy={id:null},e.duration=n.diff(se()(e.date),"d")}))};for(a.s();!(e=a.n()).done;)o()}catch(d){a.e(d)}finally{a.f()}var i=t.maps.map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0),c=t.maps.map((function(e){return e.wrs.map((function(e){return e.user}))})).reduce((function(e,t){return e.concat(t)}),[]),u=t.maps.map((function(e){return e.wrs})).reduce((function(e,t){return e.concat(t)}),[]),m=c.reduce((function(e,t){return e[t.id]=(e[t.id]||0)+1,e}),{}),s=Object.keys(m).sort((function(e,t){return m[t]-m[e]})).map((function(e){return{user:c.find((function(t){return t.id===e})),wrs:m[e],duration:r?u.filter((function(t){return t.user.id===e})).map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0):void 0}}));t.stats={totalTime:i,leaderboard:s}};for(o.s();!(l=o.n()).done;)c()}catch(d){o.e(d)}finally{o.f()}}var u,m=Object(ce.a)(t);try{var s=function(){var e,t=u.value,a=[],n=0,r=Object(ce.a)(t.maps);try{for(r.s();!(e=r.n()).done;){var l,o=e.value,i=o.map,c=o.wrs,m=o.history,s=Object(ce.a)(c);try{for(s.s();!(l=s.n()).done;){var f=l.value,p=se()(f.date),E=b?se()().diff(p,"d"):f.duration;a.push(Object(_.a)(Object(_.a)({map:{id:i.bestTimeId,name:i.alias,isFirst:f===c[0],isLast:f===c[c.length-1],records:c.length,history:m,index:n}},f),{},{duration:E}))}}catch(d){s.e(d)}finally{s.f()}++n}}catch(d){r.e(d)}finally{r.f()}t.maps=a,b&&t.stats.leaderboard.forEach((function(e,a){t.stats.leaderboard[a].duration=t.maps.filter((function(t){return t.user.id===e.user.id})).map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0)}))};for(m.s();!(u=m.n()).done;)s()}catch(d){m.e(d)}finally{m.f()}a.current&&i(t)})).catch((function(e){console.error(e),a.current&&i(null)}))}),[a,f,p,b]);var E=r.a.useCallback((function(e,t){return d(t)}),[d]),g=jt();return r.a.createElement(W,null,r.a.createElement(I.a,null,void 0===o?r.a.createElement(fe.a,null):null===o||0===o.length?r.a.createElement(oe,{data:"No data."}):r.a.createElement(r.a.Fragment,null,o.length>1&&r.a.createElement(be.a,{value:s,onChange:E,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},o.map((function(e){return r.a.createElement(pe.a,{label:e.name,key:e.name})}))),r.a.createElement(T.a,{component:"div",role:"tabpanel"},r.a.createElement(de.a,{p:3},r.a.createElement(A.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(ot,{data:o[s].maps,stats:o[s].stats,useLiveDuration:b})),r.a.createElement(A.a,{item:!0,xs:12,className:g.padTop},r.a.createElement(A.a,{container:!0,direction:"row",justify:"center",alignContent:"center"},r.a.createElement(A.a,{item:!0,xs:12,md:6},r.a.createElement(Pe,{data:o[s].stats.leaderboard,useLiveDuration:b})),r.a.createElement(A.a,{item:!0,xs:12,md:6,className:g.padTop},r.a.createElement(A.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(mt,{title:"WRs",labels:o[s].stats.leaderboard.map((function(e){return e.user.name})),series:o[s].stats.leaderboard.map((function(e){return e.wrs}))})),r.a.createElement(A.a,{item:!0,xs:12,className:g.padTop})))))))))),r.a.createElement(gt,null))})),Ot=a(277),kt=a(263),Dt=a(262),St=a(268),Bt=Object(ut.a)((function(e){var t=e.labels,a=e.series,n=(e.title,"dark"===e.theme.palette.type);return r.a.createElement(ct.a,{options:{xaxis:{categories:t},legend:{show:!1},dataLabels:{enabled:!1},chart:{toolbar:{show:!1},foreColor:n?"white":"black"},tooltip:{theme:n?"dark":"light"},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{bar:{horizontal:!0}}},series:a,type:"bar",height:"800"})})),Tt=Object(d.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),Ct=Object(ue.a)((function(e){var t=e.match,a=Y(),n=r.a.useState(void 0),l=Object(c.a)(n,2),o=l[0],i=l[1],u=r.a.useState(0),m=Object(c.a)(u,2),s=m[0],d=m[1],f=r.a.useState("leaderboard"),p=Object(c.a)(f,2),b=p[0],E=p[1],g=r.a.useCallback((function(e){E(e.target.value)}),[E]),y=t.params[0],h=t.params.date,v=void 0===h||"latest"===h;r.a.useEffect((function(){d(0),i(void 0)}),[y]),r.a.useEffect((function(){wt.request("ranks",h).then((function(e){var t=e.campaigns;a.current&&i(t)})).catch((function(e){console.error(e),a.current&&i(null)}))}),[a,y,h,v]);var w=r.a.useCallback((function(e,t){d(t)}),[d]),j=Tt();return r.a.createElement(W,null,r.a.createElement(I.a,null,void 0===o?r.a.createElement(fe.a,null):null===o||0===o.length?r.a.createElement(oe,{data:"No data."}):r.a.createElement(r.a.Fragment,null,o.length>1&&r.a.createElement(be.a,{value:s,onChange:w,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},o.map((function(e){return r.a.createElement(pe.a,{label:e.name,key:e.name})}))),r.a.createElement(T.a,{component:"div",role:"tabpanel"},r.a.createElement(de.a,{p:3},r.a.createElement(Dt.a,{className:j.formControl},r.a.createElement(Ot.a,null,"Rankings Type"),r.a.createElement(St.a,{value:b,onChange:g},r.a.createElement(kt.a,{value:"leaderboard"},"Live"),r.a.createElement(kt.a,{value:"uniqueLeaderboard"},"Unique"),r.a.createElement(kt.a,{value:"historyLeaderboard"},"Total"))),r.a.createElement(A.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(A.a,{container:!0,direction:"row",justify:"center",alignContent:"center"},r.a.createElement(A.a,{item:!0,xs:12,md:6},r.a.createElement(Pe,{data:o[s].stats[b],showDuration:"uniqueLeaderboard"!==b,useLiveDuration:v})),r.a.createElement(A.a,{item:!0,xs:12,md:6,className:j.padTop},r.a.createElement(A.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(A.a,{item:!0,xs:12},"uniqueLeaderboard"===b?r.a.createElement(Bt,{title:"WRs",labels:o[s].stats[b].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:o[s].stats[b].slice(0,20).map((function(e){return e.wrs}))}]}):r.a.createElement(mt,{title:"WRs",labels:o[s].stats[b].map((function(e){return e.user.name})),series:o[s].stats[b].map((function(e){return e.wrs})),rest:"historyLeaderboard"===b})),r.a.createElement(A.a,{item:!0,xs:12,className:j.padTop})))))))))),r.a.createElement(gt,null))})),Mt=[{id:"map.alias",sortable:!1,label:"Map",align:"left"},{id:"score",sortable:!1,label:"Times",align:"left"},{id:"delta",sortable:!1,label:"Timesave",align:"left"},{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"duration",sortable:!1,label:"Duration",align:"left"},{id:"date",sortable:!1,label:"Start",align:"left"},{id:"beatenBy.date",sortable:!1,label:"Ended",align:"left"},{id:"beatenBy.user.name",sortable:!1,label:"Beaten By",align:"left"}],Yt=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return r.a.createElement(he.a,null,r.a.createElement(ve.a,null,Mt.map((function(e){return r.a.createElement(ye.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&r.a.createElement(je.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(we.a,{active:a===e.id,direction:t,onClick:(l=e.id,o=e.id2,function(e){n(e,l,o)})},e.label)),!1===e.sortable&&e.label);var l,o}))))},Lt=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Nt={order:"desc",orderBy:"duration",thenBy:"date",page:0,rowsPerPage:50},Rt={whiteSpace:"nowrap"},Pt={padding:"7px 0px 7px 16px"},zt=function(e){return r.a.createElement(ye.a,Object.assign({style:Pt},e))},It=function(e){var t=e.data,a=e.useLiveDuration,n=r.a.useState(Object(_.a)({},Nt)),l=Object(c.a)(n,2),o=l[0],i=o.order,u=o.orderBy,m=o.thenBy,s=l[1],d=Lt();return r.a.createElement("div",{className:d.root},r.a.createElement(Ee.a,{size:"small"},r.a.createElement(Yt,{order:i,orderBy:u,onRequestSort:function(e,t,a){var n=t,r=a;s((function(e){return Object(_.a)(Object(_.a)({},e),{},{order:e.orderBy===n&&"desc"===e.order?"asc":"desc",orderBy:n,thenBy:r})}))}}),r.a.createElement(ge.a,null,ke(t,i,u,m).map((function(e){return r.a.createElement(ve.a,{tabIndex:-1,key:e.id},r.a.createElement(zt,{style:Rt,rowSpan:"map.name"===u||"map.index"===u?e.map.records:1,align:"left"},r.a.createElement(x.a,{color:"inherit",href:"https://board.iverb.me/chamber/".concat(e.map.bestTimeId),rel:"noreferrer",target:"_blank"},e.map.alias)),r.a.createElement(zt,{align:"left",style:Rt},Je(e.score)," \u2192 ",Je(e.lastScore)),r.a.createElement(zt,{align:"left"},"-",Je(Math.abs(e.lastScore-e.score))),r.a.createElement(zt,{align:"left"},r.a.createElement(Te,{user:e.user})),r.a.createElement(zt,{align:"left"},r.a.createElement(je.a,{title:"in days",placement:"bottom-end",enterDelay:300},a&&0===e.beatenBy.length?r.a.createElement(Ie.a,{style:Rt,diff:e.date,unit:"days"}):r.a.createElement("span",null,e.duration))),r.a.createElement(zt,{align:"left"},r.a.createElement(je.a,{title:r.a.createElement(Ie.a,{fromNow:!0},e.date),placement:"bottom-end",enterDelay:300},r.a.createElement(Ie.a,{style:Object(_.a)({color:Ge(e.date)},Rt),format:"YYYY-MM-DD"},e.date))),r.a.createElement(zt,{align:"left"},e.beatenBy.length>0?r.a.createElement(je.a,{title:r.a.createElement(Ie.a,{fromNow:!0},e.beatenBy[0].date),placement:"bottom-end",enterDelay:300},r.a.createElement(Ie.a,{style:Object(_.a)({color:Ge(e.beatenBy[0].date)},Rt),format:"YYYY-MM-DD"},e.beatenBy[0].date)):r.a.createElement("span",null,"ongoing")),r.a.createElement(zt,{align:"left"},e.beatenBy.length>0?r.a.createElement(Te,{user:e.beatenBy[0].user}):r.a.createElement("span",null,"unbeaten")))})))))},qt=[{id:"map.alias",sortable:!1,label:"Map",align:"left"},{id:"score",sortable:!1,label:"Time",align:"left"},{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"duration",sortable:!1,label:"Duration",align:"left"},{id:"date",sortable:!1,label:"Start",align:"left"},{id:"beatenBy.date",sortable:!1,label:"Ended",align:"left"},{id:"beatenBy.user.name",sortable:!1,label:"Beaten By",align:"left"}],At=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return r.a.createElement(he.a,null,r.a.createElement(ve.a,null,qt.map((function(e){return r.a.createElement(ye.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&r.a.createElement(je.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(we.a,{active:a===e.id,direction:t,onClick:(l=e.id,o=e.id2,function(e){n(e,l,o)})},e.label)),!1===e.sortable&&e.label);var l,o}))))},Wt=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),_t={order:"desc",orderBy:"duration",thenBy:"date",page:0,rowsPerPage:50},Ft={whiteSpace:"nowrap"},Xt={padding:"7px 0px 7px 16px"},Ut=function(e){return r.a.createElement(ye.a,Object.assign({style:Xt},e))},Ht=function(e){var t=e.data,a=e.useLiveDuration,n=r.a.useState(Object(_.a)({},_t)),l=Object(c.a)(n,2),o=l[0],i=o.order,u=o.orderBy,m=o.thenBy,s=l[1],d=Wt();return r.a.createElement("div",{className:d.root},r.a.createElement(Ee.a,{size:"small"},r.a.createElement(At,{order:i,orderBy:u,onRequestSort:function(e,t,a){var n=t,r=a;s((function(e){return Object(_.a)(Object(_.a)({},e),{},{order:e.orderBy===n&&"desc"===e.order?"asc":"desc",orderBy:n,thenBy:r})}))}}),r.a.createElement(ge.a,null,ke(t,i,u,m).map((function(e){return r.a.createElement(ve.a,{tabIndex:-1,key:e.id},r.a.createElement(Ut,{style:Ft,rowSpan:"map.name"===u||"map.index"===u?e.map.records:1,align:"left"},r.a.createElement(x.a,{color:"inherit",href:"https://board.iverb.me/chamber/".concat(e.map.bestTimeId),rel:"noreferrer",target:"_blank"},e.map.alias)),r.a.createElement(Ut,{align:"left"},Je(e.score)),r.a.createElement(Ut,{align:"left"},r.a.createElement(Te,{user:e.user})),r.a.createElement(Ut,{align:"left"},r.a.createElement(je.a,{title:"in days",placement:"bottom-end",enterDelay:300},a&&null===e.beatenBy.id?r.a.createElement(Ie.a,{style:Ft,diff:e.date,unit:"days"}):r.a.createElement("span",null,e.duration))),r.a.createElement(Ut,{align:"left"},r.a.createElement(je.a,{title:r.a.createElement(Ie.a,{fromNow:!0},e.date),placement:"bottom-end",enterDelay:300},r.a.createElement(Ie.a,{style:Object(_.a)({color:Ge(e.date)},Ft),format:"YYYY-MM-DD"},e.date))),r.a.createElement(Ut,{align:"left"},e.beatenBy.length>0?r.a.createElement(je.a,{title:r.a.createElement(Ie.a,{fromNow:!0},e.beatenBy[0].date),placement:"bottom-end",enterDelay:300},r.a.createElement(Ie.a,{style:Object(_.a)({color:Ge(e.beatenBy[0].date)},Ft),format:"YYYY-MM-DD"},e.beatenBy[0].date)):r.a.createElement("span",null,"ongoing")),r.a.createElement(Ut,{align:"left"},e.beatenBy.length>0?r.a.createElement(Te,{user:e.beatenBy[0].user}):r.a.createElement("span",null,"unbeaten")))})))))},Jt=[{id:"map.alias",sortable:!1,label:"Map",align:"left"},{id:"score",sortable:!1,label:"Time",align:"left"},{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"delta",sortable:!1,label:"Improvement",align:"left"},{id:"date",sortable:!1,label:"Date",align:"left"}],Kt=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return r.a.createElement(he.a,null,r.a.createElement(ve.a,null,Jt.map((function(e){return r.a.createElement(ye.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&r.a.createElement(je.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(we.a,{active:a===e.id,direction:t,onClick:(l=e.id,o=e.id2,function(e){n(e,l,o)})},e.label)),!1===e.sortable&&e.label);var l,o}))))},Gt=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Vt={order:"desc",orderBy:"delta",thenBy:"date",page:0,rowsPerPage:50},$t={whiteSpace:"nowrap"},Qt={padding:"7px 0px 7px 16px"},Zt=function(e){return r.a.createElement(ye.a,Object.assign({style:Qt},e))},ea=function(e){var t=e.data,a=r.a.useState(Object(_.a)({},Vt)),n=Object(c.a)(a,2),l=n[0],o=l.order,i=l.orderBy,u=l.thenBy,m=n[1],s=Gt();return r.a.createElement("div",{className:s.root},r.a.createElement(Ee.a,{size:"small"},r.a.createElement(Kt,{order:o,orderBy:i,onRequestSort:function(e,t,a){var n=t,r=a;m((function(e){return Object(_.a)(Object(_.a)({},e),{},{order:e.orderBy===n&&"desc"===e.order?"asc":"desc",orderBy:n,thenBy:r})}))}}),r.a.createElement(ge.a,null,ke(t,o,i,u).map((function(e){return r.a.createElement(ve.a,{tabIndex:-1,key:e.id},r.a.createElement(Zt,{style:$t,rowSpan:"map.name"===i||"map.index"===i?e.map.records:1,align:"left"},r.a.createElement(x.a,{color:"inherit",href:"https://board.iverb.me/chamber/".concat(e.map.bestTimeId),rel:"noreferrer",target:"_blank"},e.map.alias)),r.a.createElement(Zt,{align:"left"},Je(e.score)),r.a.createElement(Zt,{align:"left"},r.a.createElement(Te,{user:e.user})),r.a.createElement(Zt,{align:"left"},r.a.createElement("span",null,"-",Je(e.delta))),r.a.createElement(Zt,{align:"left"},r.a.createElement(je.a,{title:r.a.createElement(Ie.a,{fromNow:!0},e.date),placement:"bottom-end",enterDelay:300},r.a.createElement(Ie.a,{style:Object(_.a)({color:Ge(e.date)},$t),format:"YYYY-MM-DD"},e.date))))})))))},ta=Object(d.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),aa=Object(ue.a)((function(e){var t=e.match,a=Y(),n=r.a.useState(void 0),l=Object(c.a)(n,2),o=l[0],i=l[1],u=r.a.useState("longestLasting"),m=Object(c.a)(u,2),s=m[0],d=m[1],f=r.a.useCallback((function(e){d(e.target.value)}),[d]),p=t.params[0],b=t.params.date,E=void 0===b||"latest"===b;r.a.useEffect((function(){i(void 0)}),[p]),r.a.useEffect((function(){wt.request("stats",b).then((function(e){a.current&&i(e)})).catch((function(e){console.error(e),a.current&&i(null)}))}),[a,p,b,E]);var g=function(){switch(s){case"longestDomination":return It;case"longestLasting":return Ht;case"largestImprovement":return ea;default:return null}}(),y=ta();return r.a.createElement(W,null,r.a.createElement(I.a,null,void 0===o?r.a.createElement(fe.a,null):null===o?r.a.createElement(oe,{data:"No data."}):r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{component:"div",role:"tabpanel"},r.a.createElement(de.a,{p:3},r.a.createElement(Dt.a,{className:y.formControl},r.a.createElement(Ot.a,null,"Stats Type"),r.a.createElement(St.a,{value:s,onChange:f},r.a.createElement(kt.a,{value:"longestLasting"},"Longest Lasting"),r.a.createElement(kt.a,{value:"longestDomination"},"Longest Domination"),r.a.createElement(kt.a,{value:"largestImprovement"},"Largest Improvement"))),r.a.createElement(A.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(A.a,{container:!0,direction:"row",justify:"center",alignContent:"center"},r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(g,{data:o[s],useLiveDuration:E}))))))))),r.a.createElement(gt,null))})),na=a(57),ra=a(144),la=a(142),oa=a(140),ia=function(e){Object(ra.a)(a,e);var t=Object(la.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).update=function(){if(e.state.idx+1===e.props.timeline.length||!e.props.start)return clearInterval(e.state.intervalId);e.setState((function(t){var a=e.sortAxis(t.idx+1),n=Object(c.a)(a,2),r=n[0],l=n[1];return{idx:t.idx+1,prevRank:t.currRank,currRank:r,maxVal:l}}))},e.sortAxis=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=a||void 0===a?function(e,t){return t.val-e.val}:function(e,t){return e.val-t.val},l=Object.keys(e.props.data).map((function(a){return{name:a,val:e.props.data[a][t]}})).slice(0,e.maxItems).sort(r).filter((function(e){return e.val>=n})),o=Math.max.apply(Math,l.map((function(e){return e.val})));return[l.reduce((function(e,t,a){return Object(_.a)(Object(_.a)({},e),{},Object(na.a)({},t.name,a))}),{}),o]},e}return a}(a.n(oa).a),ca=Object(ue.a)((function(e){var t=e.match,a=Y(),n=r.a.useState({data:void 0,labels:[],colors:[],len:0}),l=Object(c.a)(n,2),o=l[0],i=l[1],u=r.a.useState(!0),m=Object(c.a)(u,2),s=m[0],d=m[1],f=t.params[0],p=t.params.date,b=void 0===p||"latest"===p;return r.a.useEffect((function(){i({data:void 0})}),[f]),r.a.useEffect((function(){wt.request("race",p).then((function(e){var t=e.data;if(a.current){var n=Object.keys(t),l=t[n[0]].length;i({data:t,timeline:Array(l).fill(0).map((function(e,t){return se()("2012-03-22").add(t,"days").format("YYYY-MM-DD")})),labels:n.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(na.a)({},t,r.a.createElement("div",{style:{textAlign:"right",paddingRight:"50px"}},r.a.createElement("div",null,t))))}),{}),colors:n.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(na.a)({},t,"rgb(".concat(255*Math.random(),", ").concat(255*Math.random(),", ").concat(255*Math.random(),")")))}),{}),len:l})}})).catch((function(e){console.error(e),a.current&&i({data:null})}))}),[a,f,p,b]),r.a.createElement(W,null,r.a.createElement(I.a,null,void 0===o.data?r.a.createElement(fe.a,null):null===o.data?r.a.createElement(oe,{data:"No data."}):r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{component:"div",role:"tabpanel"},r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center"},onClick:function(){return d((function(e){return!e}))}},r.a.createElement(ia,Object.assign({start:s,timeout:50,delay:1,timelineStyle:{textAlign:"center",fontSize:"50px",color:"rgb(148, 148, 148)",marginBottom:"100px"},textBoxStyle:{textAlign:"center",color:"rgb(133, 131, 131)",fontSize:"30px"},barStyle:{height:"60px",marginTop:"10px",borderRadius:"10px"},width:[20,75,30]},o)))))),r.a.createElement(gt,null))})),ua=Object(d.a)((function(e){return{views:{marginTop:e.spacing(5)}}})),ma=function(){var e=r.a.useReducer.apply(r.a,Object(i.a)(H)),t=Object(c.a)(e,2),a=t[0],n=t[1],l=r.a.useMemo((function(){return Object(g.a)({palette:{primary:{light:p.a[300],main:p.a[500],dark:p.a[700]},secondary:{light:b.a[300],main:b.a[500],dark:b.a[700]},error:{main:E.a.A400},type:a.darkMode.enabled?"dark":"light"}})}),[a.darkMode.enabled]),o=ua(),d=r.a.useMemo((function(){return{state:a,dispatch:n}}),[a,n]);return r.a.createElement(f.a,{theme:l},r.a.createElement(s.a,null),r.a.createElement(J.Provider,{value:d},r.a.createElement(u.a,{basename:"/"},r.a.createElement(R,null),r.a.createElement("div",{className:o.views},r.a.createElement(m.d,null,r.a.createElement(m.a,{exact:!0,from:"/",to:"/records"}),r.a.createElement(m.b,{exact:!0,path:"/records/:date?",component:xt}),r.a.createElement(m.b,{exact:!0,path:"/ranks/:date?",component:Ct}),r.a.createElement(m.b,{exact:!0,path:"/stats/:date?",component:aa}),r.a.createElement(m.b,{exact:!0,path:"/race/:date?",component:ca}),r.a.createElement(m.b,{exact:!0,path:"/about",component:V}),r.a.createElement(m.b,{exact:!0,path:"/demo",component:le}),r.a.createElement(m.b,{component:ie}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ma,null),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[161,1,2]]]);
//# sourceMappingURL=main.f2485d59.chunk.js.map